# How DOM Really Works

DOM is interface between HTML document, rendered by browsers and JavaScript. It is not a programming language. It is a set of rules that allow JavaScript to access HTML elements and styles to change them.

- allows us to make javascript interact with HTML or browser
- we can write JavaScript to create, modify and delete HTML elements and styles: set styles, classes, attributes, content; and listen and respond to user actions, like clicks, hovers, etc.
- DOM tree is generated by browser when it loads HTML document where we can then interact with it using JavaScript

- DOM is a very complex API that contains a lot of methods and properties to interact with DOM tree such as querySelector, querySelectorAll, getElementById, getElementsByClassName, getElementsByTagName, textContent, innerHTML, children, parentElement, etc.

In DOM, there are 3 types of nodes:

- document node
- element node
- text node

### How DOM API is organized behind the scenes

DOM APIs are a part of web APIs. Web APIs are a part of browser APIs. Browser APIs are a part of JavaScript. JavaScript is a part of ECMAScript.

- first, every single node in DOM tree is of the type object or node such as element, text, document, etc. (Such as Everything in JavaScript is an object, each node is an object)
- second, each node has a prototype property which is a prototype object that contains all the methods and properties that are available to that node type such as element, text, document, etc. (Such as Every object has a prototype property, which makes inheritance possible in JavaScript)
- third, each node has a constructor property which is a function that creates new nodes of that type such as element, text, document, etc. (Such as Every object has a constructor property which points to the function that was used to construct or create that object)
- this node has child nodes, which are also objects, and each of them has a prototype property and a constructor property, and so on. They are element, text, comment and document type nodes. (Such as Every object has a prototype property, which makes inheritance possible in JavaScript)
- whenever we call a method or property on a node, JavaScript engine first looks for that method or property on that node itself. If it doesn't find it, it looks for it on the prototype of that node. If it still doesn't find it, it looks for it on the prototype of the prototype, and so on, until it reaches the end of the prototype chain, which is the Object.prototype. (Such as Every object has a prototype property, which makes inheritance possible in JavaScript)
- for example: whenever there is text node inside an element node, the text node gets its own node and that node will be of type text node. And that text node will have its own prototype property and constructor property, and so on. Same applies to other nodes such as element, comment and document type nodes. (Such as Every object has a prototype property, which makes inheritance possible in JavaScript)

- everything in html goes into the DOM and for the elements itself, there is element type node and this node type gives each html element access tons of useful properties like innerHTML, classList, children, parentElement, append, remove, insertAdjacent, querySelector, closest, matches, scrollIntoView, setAttribute, etc
- the element type internally has html element child type and those child type itself has exactly one type of HTMLElement per HTML element. for example, we have special type for buttons, input, select, div, etc. This is important because each html element can have different unique properties and methods. For example, we can't use innerHTML on input element because it doesn't have innerHTML property. We can only use innerHTML on elements that have innerHTML property such as div, span, etc.

Inheritance makes it possible for us to use methods and properties on all the nodes in the DOM tree. For example, we can use querySelector on document node, element node, text node, comment node, etc. We can use textContent on document node, element node, text node, comment node, etc. We can use append on document node, element node, text node, comment node, etc. We can use remove on document node, element node, text node, comment node, etc. We can use setAttribute on document node, element node, text node, comment node, etc. We can use getAttribute on document node, element node, text node, comment node, etc. We can use scrollIntoView on document node, element node, text node, comment node, etc. We can use closest on document node, element node, text node, comment node, etc. We can use matches on document node, element node, text node, comment node, etc. We can use insertAdjacent on document node, element node, text node, comment node, etc. We can use classList on document node, element node, text node, comment node, etc. We can use children on document node, element node, text node, comment node, etc. We can use parentElement on document node, element node, text node, comment node, etc. We can use querySelector on document node, element node, text node, comment node, etc. We can use querySelectorAll on document node, element node, text node, comment node, etc. We can use getElementById on document node, element node, text node, comment node, etc. We can use getElementsByClassName on document node, element node, text node, comment node, etc. We can use getElementsByTagName on document node, element node, text node, comment node, etc. We can use textContent on document node, element node, text node, comment node, etc. We can use innerHTML on document node, element node, text node, comment node, etc. We can use style on document node, element node, text node, comment node, etc. We can use className on document node, element node, text node, comment node, etc. We can use id on document node, element node, text node, comment node, etc. We can use value on document node, element node, text node, comment node, etc.

## What is Inheritance?

Inheritance is a mechanism that allows us to eliminate duplicate code. It is a way to create a new class based on an existing class, so we don't have to write the same code again. The new class is called child class or subclass, and the one it is based on is called parent class or superclass. The child class inherits all the methods and properties from its parent class. It also has its own methods and properties, and it can also override methods it inherited from its parent class.

Inheritance means all the child types get access to the methods and properties of parent node type.

All the DOM APIs have a way of allowing all the node types to listen to events. For example, we can use addEventListener on document node, element node, text node, comment node, etc.

## EventTarget

- a special node type that is parent of both the node type and the document or window type. With these, thanks to inheritance, we can use addEventListener on document node, element node, text node, comment node, etc.
- we never manually create event target node.
- this is abstract type that we do not use in practice.
